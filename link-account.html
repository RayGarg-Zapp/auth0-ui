<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Confirm account linking</title>
  <meta name="color-scheme" content="light dark"/>
  <meta name="robots" content="noindex"/>
  <meta http-equiv="Cache-Control" content="no-store" />
  <meta http-equiv="Pragma" content="no-cache" />

  <style>
    :root{
      --bg:#0b0c10;--card:#111317;--text:#eaeef5;--muted:#9aa6b2;
      --accent:#4f8cff;--accent-600:#3a74e0;--border:#1d2129;
      --shadow:0 10px 30px rgba(0,0,0,.35)
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f6f7fb;--card:#fff;--text:#0f172a;--muted:#475569;
        --accent:#155ee7;--accent-600:#0e47b5;--border:#e5e7eb;
        --shadow:0 10px 25px rgba(0,0,0,.08)
      }
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;
      background:
        radial-gradient(1000px 700px at 20% -10%, rgba(79,140,255,.25), transparent 40%),
        radial-gradient(900px 600px at 120% 120%, rgba(34,197,94,.18), transparent 45%),
        var(--bg);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .card{
      width:min(760px,100%);
      background:var(--card);
      border:1px solid var(--border);
      border-radius:18px;
      padding:28px;
      box-shadow:var(--shadow);
    }
    h1{margin:0 0 6px;font-size:26px}
    .brand{
      font-size:12px;
      color:var(--muted);
      margin-bottom:14px;
      letter-spacing:.3px;
    }
    p{margin:0 0 14px;color:var(--muted)}
    .actions{display:flex;gap:12px;margin-top:18px}
    button{
      appearance:none;border:none;cursor:pointer;
      border-radius:10px;padding:12px 16px;
      font-weight:600;font-size:14px;
    }
    .primary{
      background:linear-gradient(180deg,var(--accent),var(--accent-600));
      color:#fff;
    }
    .secondary{
      background:transparent;border:1px solid var(--border);
      color:var(--text);
    }
    .hint{
      margin-top:14px;
      font-size:13px;
      color:var(--muted);
    }
    .error{
      color:#ef4444;
      font-size:13px;
      display:none;
      margin-top:12px
    }
  </style>
</head>

<body>
  <main class="card">
    <h1>üîê Confirm account linking</h1>
    <div class="brand">Zappsec ¬∑ CIAM Demo</div>

    <p>
      We detected another sign-in method associated with this email address.
      Linking accounts lets you sign in using either method while keeping one secure profile.
    </p>

    <p>
      For security, you‚Äôll verify the second account before we link them.
    </p>

    <div class="actions">
      <button id="continue" class="primary">Confirm and continue</button>
      <button id="cancel" class="secondary">Cancel</button>
    </div>

    <p class="hint">
      This action does not change your password or security settings.
    </p>

    <div id="err" class="error">
      We couldn‚Äôt resume your session. Please close this tab and sign in again.
    </div>
  </main>

  <script>
(function () {
  const tenant = "dev-cnhsg0roe6qny5na.us.auth0.com";
  const params = new URLSearchParams(window.location.search);
  const state = params.get("state");

  if (!state) {
    document.getElementById("err").style.display = "block";
    return;
  }

  document.getElementById("continue").onclick = () => {
    const form = document.createElement("form");
    form.method = "POST";
    form.action = `https://${tenant}/continue`;

    const input = document.createElement("input");
    input.type = "hidden";
    input.name = "state";
    input.value = state;

    form.appendChild(input);
    document.body.appendChild(form);
    form.submit();
  };

  document.getElementById("cancel").onclick = () => {
    window.location.href = "https://localhost:8080";
  };
})();
</script>

</body>
</html>
